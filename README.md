# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Базовый код

### 1. BaseComponent\<T>
Находится в основе всех визуальных представлений, включает в себя базовые операции работы с компонентом.
Класс является дженериком и принимает тип данных <T> для последующего приема данных этого типа при отрисовке.
Так же реализует интерфейс IView, что позволяет абстрагироваться от конкретной реализации и избежать 
связности на уровне классов при необходимости отрисовывать элемент представления.

Аргументы конструктора:
* container - элемент разметки компонента
* events - экземпляр реализующий паттерн "Наблюдатель" для подписки и уведомления о событии

Методы:
* render (абстрактный) - отрисовывает содержимое компонента, правила отрисовки зависят от реализации в дочернем
классе-компоненте

Поля:
* container - элемент разметки компонента


### 2. Api
Основной класс взаимодействия с внешними системами хранения и обработки данных, включает базовый интерфейс 
обращения по протоколу HTTP.

Аргументы конструктора:
* baseUrl - базовая адресная строка (URL) внешней системы
* options - опции отправляемые при каждом запросе

Методы:
* get<T> - получает данные методом GET и преобразовывать в тип T
* post<T> - отправляет данные одним из методов: POST, PUT, DELETE и преобразовывать полученный результат в тип T

### 3. BaseModel\<T>
В основе всех моделей данных и предоставляет базовую инициализацию экземпляра путем получения
объекта в конструкторе. Тип входящего объекта определяется дженерик-типом класса.

Аргументы конструктора:
* obj - экземпляр объекта, содержимое которого будет инициализированно в текущем эклемпляре класса
* events - экземпляр реализующий паттерн "Наблюдатель" для подписки и уведомления о событии

### 4. EventEmitter
Реализует паттерн "Наблюдатель" для подписки и уведомления о событии, реализует интерфейс IEvents.
Позволяет использовать централизованное хранилище обработчиков событий, своевременно и гибко управлять 
отвязкой обработчиков, а так же избежать связности между компонентами путем передачи управления брокеру.

Методы:
* on - подписка на событие
* off - отписка от события
* emit - уведомление о наступлении события
* trigger - сделать коллбек триггер, генерирующий событие при вызове
* onAll - подписка на все события
* offAll - сбросить все обработчики событий

## Компоненты модели данных

### 1. ShopApi
Является наследником класса **Api**, отвечает за взаимодействие с внешним сервисом интернет-магазина.

Методы:
* addOrder - добавить заказ
* getAllProducts - получить информацию обо всех продуктах в магазине
* getProductById - получить информацию о конкретном продукте по уникальному идентификатору

### 2. ProductModel
Модифицированное представление продукта полученного с внешнего сервиса

Поля:
* id - уникальный идентификатор
* description - описание
* image - путь к картинке
* title: - заголовок
* category - категория
* price?: - цена
* priceText: - строковое представление цены путем добавления постфикса "синапсов", 
или строкой "Бесценно" если цена отсутствует или равна нулю

### 3. Storage
Хранилище данных о продуктах загруженных с сервера, находящихся товарах в корзине, заполненных контактных данных, адресе и способе оплаты.
При изменении данных инициирует события в брокер об изменении состояния, слой презентации обрабатывает эти изменения и отражает в интерфейсе.

Аргументы конструктора:
* events - экземпляр реализующий паттерн "Наблюдатель" для подписки и уведомления о событии

Методы:
* getProductById - получить продукт по уникальному идентификатору
* addProductToBasket - добавить товар в корзину
* removeProductFromBasket - удалить товар из корзины
* isInBasket - проверить, есть ли товар в корзине
* clearBasket - очистить корзину
* clearBasketOrder - очистить информацию об адресе и способе оплаты
* clearBasketContacts - очистить информацию о контактах клиента

Поля:
* basket - информация о данных в корзине
* products - все загруженные продукты
* basketOrder - информация об адресе и способе оплаты
* basketContacts - информация о контактах пользователя: телефон и email

## Компоненты представления

### 1. PageCardView
Визуальное представление карточки продукта на главное странице.

Конструктор родителя без дополнительных аргументов.

Поля:
* id - уникальный идентификатор продукта
* titleElement - элемент разметки наименования продукта
* priceElement - элемент разметки цены на продукт

Методы:
* render - принимает на вход данные со всей необходимой информацией для 
отображения конкретной карточки продукта и выполняет действие по отрисовки компонента с заполнением всех
элементов разметки

### 2. Modal
Компонент модального окна состоящий из кнопки и внутреннего контейнера.
Наследуется от класса BaseComponent. Реализует отключение всплытия для внутреннего контейнера и операции
открытия и закрытия с уведомлением в брокер событий.

Конструктор родителя без дополнительных аргументов.

Методы:
* render - принимает на вход объект типа HTMLElement и производит замену во внутреннем контейнере на этот элемент
* close - закрывает модальное окно
* open - открывает модальное окно

Поля:
* closeButtonElement - элемент разметки кнопки закрытия модального окна
* innerContentElement - элемент разметки внутреннего контейнера

### 3. ModalCardView
Визуальное представление карточки в модальном окне. Позволяет приобрести выбранный товар, переключает состояние кнопки
"В корзину" на "Удалить" если товар добавлен и наоборот.

Конструктор родителя без дополнительных аргументов.

Методы:
* render - принимает на вход данные со всей необходимой информацией для
отображения конкретной карточки в модальном окне и выполняет действие по отрисовке внутреннего контейнера модального окна 
с полной информацией о карточке

Поля:
* id - уникальный идентификатор продукта
* titleElement - элемент разметки наименования продукта
* priceElement - элемент разметки цены на продукт
* isInBasket - флаг нахождения товара в корзине
* descriptionElement - элемент разметки с детальным описанием о продукте
* buttonElement - кнопка добавления товара и удаления товара из корзины

### 4. BasketView
Визуальное представление корзины в модальном окне. 
Позволяет просмотреть список добавленных товаров, удалить или перейти к оформлению.

Конструктор принимает аргументы родителя и класс, реализующий конструктор создания BasketCardView для циклического 
отображения во внутреннем контейнере

Поля:
* basketCardListElement - элемент разметки контейнера с карточками
* submitButton - кнопка оформления 
* priceElement - общая цена

Методы:
* render - принимает на вход данные с необходимой информацией для
отображения списка карточек в модальном окне и выполняет действие по отрисовке внутренних компонентов 
конкретной карточки типа BasketCardView через переданный аргумент конструктора

### 5. BasketCardView
Визуальное представление карточки во внутреннем контейнере корзины

Конструктор родителя без дополнительных аргументов.

Методы:
* render - принимает на вход данные со всей необходимой информацией для
отображения конкретной карточки и выполняет действие по отрисовке

Поля:
* id - уникальный идентификатор продукта
* titleElement - элемент разметки наименования продукта
* priceElement - элемент разметки цены на продукт 
* itemIndexElement - элемент разметки порядкового номера
* removeButtonElement - элемент разметки кнопки удаления

### 6. OrderView 
Визуальное представление модального окна оформления заказа с выбором типа оплаты и указанием адреса

Конструктор родителя без дополнительных аргументов.

Методы:
* updateOrderButtonState - обновить состояние кнопки исходя из заполненных данных
* render - принимает на вход данные по умолчанию с адресом и типом оплаты и выполняет действие по отрисовке

Поля:
* address - адрес
* payment - тип оплаты
* cardButtonElement - элемент разметки кнопки выбора оплаты картой
* cashButtonElement - элемент разметки кнопки выбора оплаты наличными
* addressElement - элемент разметки поля ввода адреса
* orderButtonElement - элемент разметки кнопки перехода на страницу заполнения контактных данных

### 7. ContactsView
Визуальное представление модального окна оформления заказа с заполнением контактных данных телефона и почты

Конструктор родителя без дополнительных аргументов.

Методы:
* updateSubmitButtonState - обновить состояние кнопки исходя из заполненных данных
* render - принимает на вход данные по умолчанию с контактной информацией и выполняет действие по отрисовке

Поля:
* email - почтовый адрес
* phone - номер телефона
* emailElement - элемент разметки почтового адреса
* phoneElement - элемент разметки номера телефона
* submitButtonElement - элемент разметки кнопки оформления заказа


### 8. SuccessView
Визуальное отображение модального окна с успешным оформлением заказа

Конструктор родителя без дополнительных аргументов.

Методы:
* render - выполняет действие по отрисовке















